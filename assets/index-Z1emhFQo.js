var e=Object.defineProperty,a=(a,t,s)=>((a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s)(a,"symbol"!=typeof t?t+"":t,s);import{P as t}from"./phaser-Co6Ukw23.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();class s extends t.Scene{constructor(){super("preloader")}onLoad(){const e=this.add.text(this.sys.canvas.width/2-50,this.sys.canvas.height/2,"–ó–∞–≥—Ä—É–∑–∫–∞...",{fontSize:18}),a=this.add.text(e.x+20,e.y+20,"0");this.load.on("progress",(function(e){a.text=`${Math.floor(100*e)}%`}))}preload(){this.onLoad(),this.load.image("happy-ground","assets/happy/happy.png"),this.load.tilemapTiledJSON("happy-ground-tilemap","assets/happy/happy-ground.json"),this.load.image("background_1","assets/happy/background_layer_1.png"),this.load.image("background_2","assets/happy/background_layer_2.png"),this.load.image("platform","assets/happy/objects/platform.png"),this.load.image("paper","assets/happy/objects/paper.png"),this.load.image("star","assets/happy/objects/star3.png"),this.load.atlas("alexandra_fall","assets/happy/womens/alexandra_fall.png","assets/happy/womens/alexandra_fall.json"),this.load.atlas("alexandra_jump","assets/happy/womens/alexandra_jump.png","assets/happy/womens/alexandra_jump.json"),this.load.atlas("karina_fall","assets/happy/womens/karina_fall.png","assets/happy/womens/karina_fall.json"),this.load.atlas("karina_jump","assets/happy/womens/karina_jump.png","assets/happy/womens/karina_jump.json"),this.load.atlas("katya_fall","assets/happy/womens/katya_fall.png","assets/happy/womens/katya_fall.json"),this.load.atlas("katya_jump","assets/happy/womens/katya_jump.png","assets/happy/womens/katya_jump.json"),this.load.atlas("ksusha_fall","assets/happy/womens/ksusha_fall.png","assets/happy/womens/ksusha_fall.json"),this.load.atlas("ksusha_jump","assets/happy/womens/ksusha_jump.png","assets/happy/womens/ksusha_jump.json"),this.load.atlas("liza_fall","assets/happy/womens/liza_fall.png","assets/happy/womens/liza_fall.json"),this.load.atlas("liza_jump","assets/happy/womens/liza_jump.png","assets/happy/womens/liza_jump.json"),this.load.atlas("masha_fall","assets/happy/womens/masha_fall.png","assets/happy/womens/masha_fall.json"),this.load.atlas("masha_jump","assets/happy/womens/masha_jump.png","assets/happy/womens/masha_jump.json"),this.load.atlas("natasha_fall","assets/happy/womens/natasha_fall.png","assets/happy/womens/natasha_fall.json"),this.load.atlas("natasha_jump","assets/happy/womens/natasha_jump.png","assets/happy/womens/natasha_jump.json"),this.load.atlas("rusinya_fall","assets/happy/womens/rusinya_fall.png","assets/happy/womens/rusinya_fall.json"),this.load.atlas("rusinya_jump","assets/happy/womens/rusinya_jump.png","assets/happy/womens/rusinya_jump.json"),this.load.atlas("sashenka_fall","assets/happy/womens/sashenka_fall.png","assets/happy/womens/sashenka_fall.json"),this.load.atlas("sashenka_jump","assets/happy/womens/sashenka_jump.png","assets/happy/womens/sashenka_jump.json"),this.load.atlas("savch_fall","assets/happy/womens/savch_fall.png","assets/happy/womens/savch_fall.json"),this.load.atlas("savch_jump","assets/happy/womens/savch_jump.png","assets/happy/womens/savch_jump.json"),this.load.atlas("shu_fall","assets/happy/womens/shu_fall.png","assets/happy/womens/shu_fall.json"),this.load.atlas("shu_jump","assets/happy/womens/shu_jump.png","assets/happy/womens/shu_jump.json"),this.load.atlas("tanya_fall","assets/happy/womens/tanya_fall.png","assets/happy/womens/tanya_fall.json"),this.load.atlas("tanya_jump","assets/happy/womens/tanya_jump.png","assets/happy/womens/tanya_jump.json"),this.load.atlas("vlada_fall","assets/happy/womens/vlada_fall.png","assets/happy/womens/vlada_fall.json"),this.load.atlas("vlada_jump","assets/happy/womens/vlada_jump.png","assets/happy/womens/vlada_jump.json"),this.load.atlas("chest","assets/happy/objects/Chests.png","assets/happy/objects/Chests.json"),this.load.atlas("coin","assets/happy/objects/coin/coin.png","assets/happy/objects/coin/coin.json"),this.load.image("flare","assets/happy/white-flare.png"),this.load.audio("music","assets/happy/scott-buckley-reverie(chosic.com).mp3")}create(){this.scene.start("Menu")}}const i="–£—Ä–∞, —Ç—ã —Å–ø—Ä–∞–≤–∏–ª–∞—Å—å! –û—Ç –≤—Å–µ–π –¥—É—à–∏ –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å 8 –º–∞—Ä—Ç–∞ –∏ —Ö–æ—Ç–∏–º –ø—Ä–µ–∑–µ–Ω—Ç–æ–≤–∞—Ç—å —Ç–µ–±–µ –Ω–µ–±–æ–ª—å—à—É—é –ø—Ä–∏—è—Ç–Ω–æ—Å—Ç—å ‚ù§Ô∏è –ù–∞–ø–∏—à–∏ –≤–æ–∂–∞–∫—É —Å—Ç–∞–∏ —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–Ø –¥—É—Ä–µ—é —Å —ç—Ç–æ–π –ø—Ä–∏–∫–æ—Ä–º–∫–∏¬ª –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è üéÅ",r=i,l=i,n=i,o=i,h=i,p=i,m=i,d=i,c=i,f=i,y=i,u=i;var g=(e=>(e[e.Disabled=0]="Disabled",e[e.Platform=1]="Platform",e[e.Player=2]="Player",e[e.Coin=8]="Coin",e))(g||{});const _=[{name:"–°–∞–≤—á",greetings:r,key:"savch"},{name:"–†—É—Å–∏–Ω—è",greetings:n,key:"rusinya"},{name:"–ù–∞—Ç–∞—à–∞",greetings:p,key:"natasha"},{name:"–¢–∞–Ω—è",greetings:l,key:"tanya"},{name:"–ö–∞—Ä–∏–Ω–∞",greetings:h,key:"karina"},{name:"–ú–∞—à–∞",greetings:o,key:"masha"},{name:"–®—É",greetings:o,key:"shu"},{name:"–ö–∞—Ç—è",greetings:m,key:"katya"},{name:"–í–ª–∞–¥–∞",greetings:d,key:"vlada"},{name:"–ö—Å—é—à–∞",greetings:c,key:"ksusha"},{name:"–°–∞—à–µ–Ω—å–∫–∞",greetings:f,key:"sashenka"},{name:"–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞",greetings:y,key:"alexandra"},{name:"–õ–∏–∑–∞",greetings:u,key:"liza"}];class k extends t.Scene{constructor(){super("Menu"),a(this,"window"),a(this,"text"),a(this,"state","none"),a(this,"shaders",[]),a(this,"startGame",(()=>{this.scene.start("Game")}))}preload(){this.load.glsl("cardShader","/shaders/cardShader.frag"),this.load.glsl("backgroundShader","/shaders/background.glsl")}create(){const e=this.cameras.main.width/2;this.cards=[],_.forEach(((a,t)=>{const s=t%2,i=Math.floor(t/2),r=0===s?e-82.5:e+82.5,l=120+90*i,n=this.add.rectangle(r,l,150,75,16777215,1);n.setInteractive(),n.on("pointerdown",(()=>{localStorage.setItem("girlKey",a.key),localStorage.setItem("greetings",a.greetings),this.startGame()}));const o=this.add.particles(0,0,"flare",{speed:24,lifespan:1500,quantity:5,scale:{start:.4,end:0},emitting:!1,emitZone:{type:"edge",source:n.getBounds(),quantity:42},duration:200});n.on("pointerover",(()=>{o.start()})),this.add.text(r,l,`${a.name}`,{color:"#ea4386",fontSize:18}).setOrigin(.5),this.cards.push(n)}))}}class x extends t.Physics.Matter.Sprite{constructor(e,t,s,i,r,l){var n;super(e.matter.world,t,s,i,l,{label:"girl",frictionAir:.006}),a(this,"direction",3),a(this,"hp",100),a(this,"isTouchingGround",!1),a(this,"text"),a(this,"girlSpriteKey",""),this.setData("label","girl"),this.flipX=!0,this.name=r,this.text=this.scene.add.text(this.x,this.y-20,this.name,{color:"#3807c4",fontFamily:"Arial",fontStyle:"bold",fontSize:22,align:"center"}).setOrigin(.5,.5),this.text.setDepth(11).setAlpha(0),this.text.postFX.addGlow(16777215,6,0,!1,.1,24),this.setRectangle(27,45),this.setOrigin(.5,.55),this.girlSpriteKey=localStorage.getItem("girlKey"),this.setScale(2),this.setFixedRotation(),this.setDepth(7),this.label="girl",this.scene.add.existing(this),(n=this.scene.anims).create({key:"alexandra_jump",frames:n.generateFrameNames("alexandra_jump",{start:0,end:3,prefix:"alexandra_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"alexandra_fall",frames:n.generateFrameNames("alexandra_fall",{start:0,end:3,prefix:"alexandra_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"karina_jump",frames:n.generateFrameNames("karina_jump",{start:0,end:3,prefix:"karina_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"karina_fall",frames:n.generateFrameNames("karina_fall",{start:0,end:3,prefix:"karina_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"katya_jump",frames:n.generateFrameNames("katya_jump",{start:0,end:3,prefix:"katya_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"katya_fall",frames:n.generateFrameNames("katya_fall",{start:0,end:3,prefix:"katya_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"ksusha_jump",frames:n.generateFrameNames("ksusha_jump",{start:0,end:3,prefix:"ksusha_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"ksusha_fall",frames:n.generateFrameNames("ksusha_fall",{start:0,end:3,prefix:"ksusha_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"liza_fall",frames:n.generateFrameNames("liza_fall",{start:0,end:3,prefix:"liza_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"liza_jump",frames:n.generateFrameNames("liza_jump",{start:0,end:3,prefix:"liza_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"masha_fall",frames:n.generateFrameNames("masha_fall",{start:0,end:3,prefix:"masha_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"masha_jump",frames:n.generateFrameNames("masha_jump",{start:0,end:3,prefix:"masha_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"natasha_fall",frames:n.generateFrameNames("natasha_fall",{start:0,end:3,prefix:"natasha_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"natasha_jump",frames:n.generateFrameNames("natasha_jump",{start:0,end:3,prefix:"natasha_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"rusinya_fall",frames:n.generateFrameNames("rusinya_fall",{start:0,end:3,prefix:"rusinya_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"rusinya_jump",frames:n.generateFrameNames("rusinya_jump",{start:0,end:3,prefix:"rusinya_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"sashenka_fall",frames:n.generateFrameNames("sashenka_fall",{start:0,end:3,prefix:"sashenka_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"sashenka_jump",frames:n.generateFrameNames("sashenka_jump",{start:0,end:3,prefix:"sashenka_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"savch_fall",frames:n.generateFrameNames("savch_fall",{start:0,end:3,prefix:"savch_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"savch_jump",frames:n.generateFrameNames("savch_jump",{start:0,end:3,prefix:"savch_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"shu_fall",frames:n.generateFrameNames("shu_fall",{start:0,end:3,prefix:"shu_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"shu_jump",frames:n.generateFrameNames("shu_jump",{start:0,end:3,prefix:"shu_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"tanya_fall",frames:n.generateFrameNames("tanya_fall",{start:0,end:3,prefix:"tanya_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"tanya_jump",frames:n.generateFrameNames("tanya_jump",{start:0,end:3,prefix:"tanya_jump",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"vlada_fall",frames:n.generateFrameNames("vlada_fall",{start:0,end:3,prefix:"vlada_fall",suffix:".png"}),repeat:-1,frameRate:20}),n.create({key:"vlada_jump",frames:n.generateFrameNames("vlada_jump",{start:0,end:3,prefix:"vlada_jump",suffix:".png"}),repeat:-1,frameRate:20}),this.emitter=this.scene.add.particles(0,0,"flare",{speed:24,lifespan:1500,quantity:10,scale:{start:.4,end:0},emitting:!1,emitZone:{type:"edge",source:this.getBounds(),quantity:42},duration:500}),this.emitter.setDepth(7),this.setOnCollide((e=>{this.isTouchingGround=!0,this.emitter.setPosition(this.x,this.y+this.height/2),this.emitter.start()})),this.setCollisionCategory(g.Player),this.setCollidesWith([g.Disabled,g.Coin]),this.setName("girl")}update(e){const{left:a,right:s,up:i,down:r,space:l}=e;this.emitter.copyPosition(this.x,this.y),this.body.velocity.y<0?(this.anims.play(`${this.girlSpriteKey}_jump`,!0),s.isDown?(this.setVelocityX(4),this.flipX=!0):a.isDown&&(this.setVelocityX(-4),this.flipX=!1)):this.body.velocity.y>0?(this.anims.play(`${this.girlSpriteKey}_fall`,!0),s.isDown?(this.setVelocityX(4),this.flipX=!0):a.isDown&&(this.setVelocityX(-4),this.flipX=!1)):a.isDown?(this.setVelocityX(-4),this.flipX=!1,this.anims.play(`${this.girlSpriteKey}_run`,!0)):s.isDown?(this.setVelocityX(4),this.flipX=!0,this.anims.play(`${this.girlSpriteKey}_run`,!0)):this.anims.play(`${this.girlSpriteKey}_idle`,!0),t.Input.Keyboard.JustDown(i)&&this.isTouchingGround&&(this.setVelocityY(-15),this.isTouchingGround=!1),this.text.copyPosition({x:this.x,y:this.y-60}),this.y>3e3&&(this.setPosition(w.x,this.scene.firstPlatformY-200),this.setVelocityY(-10))}}class j extends t.Physics.Matter.Image{constructor(e,t,s,i,r){super(e.matter.world,t,s,i,r),a(this,"startY",0),a(this,"startX",0),this.startX=t,this.startY=s,this.setStatic(!0),this.setDepth(7),this.setFixedRotation(),this.setFriction(1,0,1/0),this.setIgnoreGravity(!0),this.setData("label","platform"),this.setCollisionCategory(g.Platform),this.setCollidesWith(g.Player),this.scene.add.existing(this)}moveVertically(e){this.scene.tweens.addCounter({from:0,to:-900,duration:e,ease:t.Math.Easing.Sine.InOut,repeat:-1,yoyo:!0,onUpdate:(e,a)=>{const t=this.startY+a.value,s=t-this.y;this.y=t,this.setVelocityY(s)}})}moveHorizontally(e,a){this.scene.tweens.addCounter({from:0,to:-a,duration:e,ease:t.Math.Easing.Sine.InOut,repeat:-1,yoyo:!0,onUpdate:(e,a)=>{const t=this.startX+a.value,s=t-this.x;this.x=t,this.setVelocityX(s)}})}}const b=t.Math.DegToRad(-180),w={x:550,y:2200};class v extends t.Scene{constructor(){super("Game"),a(this,"playerController",{blocked:{left:!1,right:!1,bottom:!1},numTouching:{left:0,right:0,bottom:0},sensors:{bottom:null,left:null,right:null}}),a(this,"hook"),a(this,"lineGroup"),a(this,"cursors"),a(this,"stars"),a(this,"platform"),a(this,"platform2"),a(this,"platform3"),a(this,"isMovingLeft",!1),a(this,"isMovingRight",!1),a(this,"moveSpeed",5),a(this,"halfWidth",0),a(this,"platforms"),a(this,"coins"),a(this,"coinCount",0),a(this,"coinText"),a(this,"maxPlatforms",10),a(this,"platformDistance",300),a(this,"lastPlatformY",0),a(this,"firstPlatformY",0),a(this,"chest"),a(this,"starsSummary",0),a(this,"lizard"),a(this,"isTouchingGround",!1),a(this,"level",1),a(this,"loadNextLevel",!1),a(this,"showDialog",!1),a(this,"dialog"),a(this,"fish"),a(this,"dialogLevel",0),a(this,"emitter",new t.Events.EventEmitter),a(this,"water"),a(this,"stick"),a(this,"music"),a(this,"backgrounds",[]),a(this,"velocityX",10),a(this,"collisionCategory1",1),a(this,"collisionCategory2",2),a(this,"collisionCategory3",4),a(this,"collisionCategory4",8),a(this,"collisionWaterCategory",5)}preload(){this.cursors=this.input.keyboard.createCursorKeys()}create2(){const e=t.Physics.Matter.Matter,a=this.lizard.width,s=this.lizard.height;this.lizard.x,this.lizard.y,this.playerController.sensors.bottom=e.Bodies.rectangle(0,s/2,.75*a,5,{isSensor:!0,label:"bottomSensor"}),this.playerController.sensors.left=e.Bodies.rectangle(.45*-a,0,5,.25*s,{isSensor:!0,label:"leftSensor"}),this.playerController.sensors.right=e.Bodies.rectangle(.45*a,0,5,.25*s,{isSensor:!0,label:"rightSensor"}),e.Body.create({parts:[this.lizard.body,this.playerController.sensors.bottom,this.playerController.sensors.left,this.playerController.sensors.right],friction:.01,restitution:.05}),this.matter.world.on("beforeupdate",(()=>{this.playerController.numTouching.left=0,this.playerController.numTouching.right=0,this.playerController.numTouching.bottom=0})),this.matter.world.on("collisionactive",(e=>{const a=this.lizard.body,t=this.playerController.sensors.left,s=this.playerController.sensors.right,i=this.playerController.sensors.bottom;for(let r=0;r<e.pairs.length;r++){const l=e.pairs[r].bodyA,n=e.pairs[r].bodyB;l!==a&&n!==a&&(l===i||n===i?this.playerController.numTouching.bottom+=1:l===t&&n.isStatic||n===t&&l.isStatic?this.playerController.numTouching.left+=1:(l===s&&n.isStatic||n===s&&l.isStatic)&&(this.playerController.numTouching.right+=1))}})),this.matter.world.on("afterupdate",(()=>{this.playerController.blocked.right=this.playerController.numTouching.right>0,this.playerController.blocked.left=this.playerController.numTouching.left>0,this.playerController.blocked.bottom=this.playerController.numTouching.bottom>0}))}handleTouchInput(e){e.x<this.halfWidth?(this.isMovingLeft=!0,this.isMovingRight=!1):(this.isMovingLeft=!1,this.isMovingRight=!0)}create(){var e;this.coins=this.add.group(),(e=this.anims).create({key:"coin",frames:e.generateFrameNames("coin",{start:0,end:4,prefix:"MonedaD",suffix:".png"}),repeat:-1,frameRate:10}),this.originalWidth=this.scale.width,this.originalHeight=this.scale.height,this.platforms=this.add.group(),this.halfWidth=this.scale.width/2,this.input.addPointer(1),this.input.on("pointerdown",(e=>{this.handleTouchInput(e)})),this.input.on("pointermove",(e=>{e.isDown&&this.handleTouchInput(e)})),this.input.on("pointerup",(()=>{this.isMovingLeft=!1,this.isMovingRight=!1})),this.coinText=this.add.text(20,20,"–ú–æ–Ω–µ—Ç—ã: 0",{fontSize:"24px",fill:"#FFD700",fontFamily:"Arial",stroke:"#000",strokeThickness:4}).setScrollFactor(0).setDepth(1e3),this.add.existing(this.coinText),this.sound.pauseOnBlur=!1,this.music=this.sound.add("music",{volume:.2,loop:!0}),this.sound.locked?this.sound.once(t.Sound.Events.UNLOCKED,(()=>{this.music.play()})):this.music.play(),this.game.events.on(t.Core.Events.BLUR,(()=>{})),document.addEventListener("visibilitychange",(()=>{console.log("visibilitychange"),document.hidden})),this.tweener={x:b},this.GROUND_COLLISION_GROUP=this.matter.world.nextCategory();const a=localStorage.getItem("happyName");let s;var i;(i=s||(s={})).Ksenia="ksenia",i.Elena="elena";const r=localStorage.getItem("girlKey");this.lizard=new x(this,w.x,w.y,r,a,{label:"girl"}),this.create2(),this.createPlatform(w.x,w.y+200),this.createPlatform(w.x,w.y),this.createPlatform(t.Math.Between(w.x-150,w.x+150),w.y-200),this.generatePlatforms(),this.generatePlatforms(),this.matter.world.on("collisionstart",(e=>{this.handleCollision(e),this.handleCoinCollision(e)}),this),this.time.addEvent({delay:1e3,callback:this.generatePlatforms,callbackScope:this,loop:!0}),this.time.addEvent({delay:1e3,callback:()=>this.createCoin(t.Math.Between(w.x-150,w.x+150),this.lastPlatformY-60),callbackScope:this,loop:!0}),this.cameras.main.startFollow(this.lizard);const{width:l,height:n}=this.scale,o=this.add.graphics();o.fillStyle(0,1),this.backgrounds.push({ratioX:.07,ratioY:.009,sprite:this.add.tileSprite(0,0,l,n,"background_1").setOrigin(0,0).setScrollFactor(0,0).setScale(3.5,4)},{ratioX:.09,ratioY:.02,sprite:this.add.tileSprite(0,-120,l,n,"background_2").setOrigin(0,0).setScrollFactor(0,0).setScale(3.5,4)}),this.backgrounds.forEach((e=>{o.fillRect(0,0,this.cameras.main.width,this.cameras.main.height)})),this.add.graphics(),this.matter.world.on("collisionend",((e,a,t)=>{e.pairs.some((e=>"water"==e.bodyA.label&&"hook"==e.bodyB.label))})),this.lights.enable(),this.lights.setAmbientColor(8421504),this.events.on("resume",(()=>{})),this.light=this.lights.addLight(this.lizard.x,this.lizard.y,512).setIntensity(2),this.matter.world.update60Hz(),this.cameras.main.setFollowOffset(-30,80)}update(e,a){for(let t=0;t<this.backgrounds.length;++t){const e=this.backgrounds[t];e.sprite&&(e.sprite.tilePositionX=this.cameras.main.scrollX*e.ratioX)}this.light.x=this.lizard.x,this.light.y=this.lizard.y,this.cleanPlatforms(),this.updatePlatformCollisions(),this.checkPlayerHeight(),this.cursors,this.lizard.update(this.cursors),this.isMovingLeft?(this.lizard.flipX=!1,this.lizard.setVelocityX(-this.moveSpeed)):this.isMovingRight?(this.lizard.flipX=!0,this.lizard.setVelocityX(this.moveSpeed)):this.lizard.setVelocityX(.9*this.lizard.body.velocity.x)}createPlatform(e,a){var t,s;const i=new j(this,e,a,"platform",{});this.platforms.add(i),this.lastPlatformY=a,this.firstPlatformY=null==(s=null==(t=this.platforms.getChildren())?void 0:t.at)?void 0:s.call(t,0).y}generatePlatforms(){const e=t.Math.Between(w.x-150,w.x+150),a=this.lastPlatformY-t.Math.Between(300,250);this.createPlatform(e,a),this.lastPlatformY=a}updatePlatformCollisions(){const e=this.lizard.body.velocity.y<0;this.lizard.body.velocity.x,this.lizard.body.velocity.x,e?this.lizard.setCollidesWith([g.Disabled,g.Coin]):this.lizard.setCollidesWith([g.Platform,g.Coin])}createCoin(e,a){const t=this.matter.add.sprite(e,a,"coin",void 0,{label:"coin"});t.setScale(2),t.setIgnoreGravity(!0),t.setBounce(.5),t.setData("label","coin"),t.anims.play("coin"),t.setCollisionCategory(g.Coin),t.setCollidesWith([g.Player]),this.coins.add(t)}handleCollision(e){e.pairs.forEach((e=>{const a=e.bodyA,t=e.bodyB,s=a.gameObject,i=t.gameObject,r=s&&"girl"===s.getData("label"),l=s&&"platform"===s.getData("label"),n=i&&"girl"===i.getData("label"),o=i&&"platform"===i.getData("label");(r&&o||n&&l)&&this.lizard.body.velocity.y>0&&this.lizard.setVelocityY(-17)}))}cleanPlatforms(){this.platforms.getChildren().forEach((e=>{e.y>this.cameras.main.scrollY+1100&&(console.log("DESTROY PLATFORM:",e),e.destroy())}))}cleanCoins(){this.coins.getChildren().forEach((e=>{e.y>this.cameras.main.scrollY+1100&&(console.log("DESTROY PLATFORM:",e),e.destroy())}))}checkPlayerHeight(){this.cameras.main.setScroll(0,this.lizard.y-200)}handleCoinCollision(e){e.pairs.forEach((e=>{const a=e.bodyA,t=e.bodyB,s=a.gameObject,i=t.gameObject;s&&s.getData("label"),s&&s.getData("label"),i&&i.getData("label"),i&&i.getData("label");const r=[a,t].find((e=>{var a;return"coin"===(null==(a=null==e?void 0:e.gameObject)?void 0:a.getData("label"))})),l=[a,t].find((e=>{var a;return"girl"===(null==(a=null==e?void 0:e.gameObject)?void 0:a.getData("label"))}));if(r&&l){const e=r.gameObject;this.coinCount++,this.coinText.setText(`–ú–æ–Ω–µ—Ç—ã: ${this.coinCount}`),e.destroy(!0)}}))}}const C={type:t.WEBGL,canvas:document.querySelector("#phaser"),fps:{limit:140},scale:{mode:t.Scale.RESIZE,autoCenter:t.Scale.CENTER_BOTH},physics:{default:"matter",matter:{gravity:{y:1}}},scene:[s,k,v]};new t.Game(C);
