var t=Object.defineProperty,e=(e,a,s)=>((e,a,s)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s)(e,"symbol"!=typeof a?a+"":a,s);import{P as a}from"./phaser-Co6Ukw23.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const a of t)if("childList"===a.type)for(const t of a.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class s extends a.Scene{constructor(){super("preloader")}onLoad(){const t=this.add.text(this.sys.canvas.width/2-50,this.sys.canvas.height/2,"–ó–∞–≥—Ä—É–∑–∫–∞...",{fontSize:18}),e=this.add.text(t.x+20,t.y+20,"0");this.load.on("progress",(function(t){e.text=`${Math.floor(100*t)}%`}))}preload(){this.onLoad(),this.load.image("happy-ground","assets/happy/happy.png"),this.load.tilemapTiledJSON("happy-ground-tilemap","assets/happy/happy-ground.json"),this.load.image("background_1","assets/happy/background_layer_1.png"),this.load.image("background_2","assets/happy/background_layer_2.png"),this.load.image("Back_1","assets/happy/Back_1.png"),this.load.image("Clouds_front","assets/happy/Clouds_front.png"),this.load.image("Rock_1","assets/happy/Rock_1.png"),this.load.image("Rock_2","assets/happy/Rock_2.png"),this.load.image("Clouds_back","assets/happy/Clouds_back.png"),this.load.image("Back_2","assets/happy/Back_2.png"),this.load.image("platform","assets/happy/objects/platform.png"),this.load.image("platform2","assets/happy/objects/platform2.png"),this.load.image("paper","assets/happy/objects/paper.png"),this.load.image("star","assets/happy/objects/star3.png"),this.load.image("tulip","assets/happy/objects/tulip/tulip.png"),this.load.atlas("bat","assets/happy/bat/bat.png","assets/happy/bat/bat.json"),this.load.atlas("petal","assets/happy/objects/petal/petal.png","assets/happy/objects/petal/petal.json"),this.load.atlas("alexandra_fall","assets/happy/womens/alexandra_fall.png","assets/happy/womens/alexandra_fall.json"),this.load.atlas("alexandra_jump","assets/happy/womens/alexandra_jump.png","assets/happy/womens/alexandra_jump.json"),this.load.atlas("karina_fall","assets/happy/womens/karina_fall.png","assets/happy/womens/karina_fall.json"),this.load.atlas("karina_jump","assets/happy/womens/karina_jump.png","assets/happy/womens/karina_jump.json"),this.load.atlas("katya_fall","assets/happy/womens/katya_fall.png","assets/happy/womens/katya_fall.json"),this.load.atlas("katya_jump","assets/happy/womens/katya_jump.png","assets/happy/womens/katya_jump.json"),this.load.atlas("ksusha_fall","assets/happy/womens/ksusha_fall.png","assets/happy/womens/ksusha_fall.json"),this.load.atlas("ksusha_jump","assets/happy/womens/ksusha_jump.png","assets/happy/womens/ksusha_jump.json"),this.load.atlas("liza_fall","assets/happy/womens/liza_fall.png","assets/happy/womens/liza_fall.json"),this.load.atlas("liza_jump","assets/happy/womens/liza_jump.png","assets/happy/womens/liza_jump.json"),this.load.atlas("masha_fall","assets/happy/womens/masha_fall.png","assets/happy/womens/masha_fall.json"),this.load.atlas("masha_jump","assets/happy/womens/masha_jump.png","assets/happy/womens/masha_jump.json"),this.load.atlas("natasha_fall","assets/happy/womens/natasha_fall.png","assets/happy/womens/natasha_fall.json"),this.load.atlas("natasha_jump","assets/happy/womens/natasha_jump.png","assets/happy/womens/natasha_jump.json"),this.load.atlas("rusinya_fall","assets/happy/womens/rusinya_fall.png","assets/happy/womens/rusinya_fall.json"),this.load.atlas("rusinya_jump","assets/happy/womens/rusinya_jump.png","assets/happy/womens/rusinya_jump.json"),this.load.atlas("sashenka_fall","assets/happy/womens/sashenka_fall.png","assets/happy/womens/sashenka_fall.json"),this.load.atlas("sashenka_jump","assets/happy/womens/sashenka_jump.png","assets/happy/womens/sashenka_jump.json"),this.load.atlas("savch_fall","assets/happy/womens/savch_fall.png","assets/happy/womens/savch_fall.json"),this.load.atlas("savch_jump","assets/happy/womens/savch_jump.png","assets/happy/womens/savch_jump.json"),this.load.atlas("shu_fall","assets/happy/womens/shu_fall.png","assets/happy/womens/shu_fall.json"),this.load.atlas("shu_jump","assets/happy/womens/shu_jump.png","assets/happy/womens/shu_jump.json"),this.load.atlas("tanya_fall","assets/happy/womens/tanya_fall.png","assets/happy/womens/tanya_fall.json"),this.load.atlas("tanya_jump","assets/happy/womens/tanya_jump.png","assets/happy/womens/tanya_jump.json"),this.load.atlas("vlada_fall","assets/happy/womens/vlada_fall.png","assets/happy/womens/vlada_fall.json"),this.load.atlas("vlada_jump","assets/happy/womens/vlada_jump.png","assets/happy/womens/vlada_jump.json"),this.load.atlas("chest","assets/happy/objects/Chests.png","assets/happy/objects/Chests.json"),this.load.atlas("coin","assets/happy/objects/coin/coin.png","assets/happy/objects/coin/coin.json"),this.load.image("flare","assets/happy/white-flare.png"),this.load.audio("music","assets/happy/scott-buckley-reverie(chosic.com).mp3"),this.load.audio("grab-coin","assets/happy/grab-coin.wav")}create(){this.scene.start("Guide")}}const i=["–¢—ã —Ç–∞–∫–∞—è –∫—Ä–∞—Å–∏–≤–∞—è, —á—Ç–æ –¥–∞–∂–µ –º–æ–Ω–µ—Ç–∫–∏ —Å–∞–º–∏ –ø–∞–¥–∞—é—Ç!","–£–º–Ω–∏—Ü–∞, —Ç—ã —É–∂–µ —Å–æ–±—Ä–∞–ª–∞ –±–æ–ª—å—à–µ –º–æ–Ω–µ—Ç–æ–∫, —á–µ–º —É –Ω–∞—Å –≤ –∫–æ—à–µ–ª—å–∫–µ!","–° —Ç–∞–∫–∏–º —Ç–∞–ª–∞–Ω—Ç–æ–º —Ç—ã –º–æ–∂–µ—à—å —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞ –º–∏—Ä–∞!","–¢–≤–æ—è —É–ª—ã–±–∫–∞ —Å–≤–µ—Ç–ª–µ–µ –≤—Å–µ—Ö –º–æ–Ω–µ—Ç –≤–º–µ—Å—Ç–µ –≤–∑—è—Ç—ã—Ö!","–¢—ã –ø—Ä–æ—Å—Ç–æ –∑–≤–µ–∑–¥–∞ —ç—Ç–æ–π –∏–≥—Ä—ã!","–¢—ã —Ç–∞–∫ –ª–æ–≤–∫–æ –ø—Ä—ã–≥–∞–µ—à—å, —á—Ç–æ –º—ã –±–æ–∏–º—Å—è, –∫–∞–∫ –±—ã —Ç—ã –Ω–µ —É–ª–µ—Ç–µ–ª–∞ –≤ –∫–æ—Å–º–æ—Å!","–° —Ç–æ–±–æ–π –¥–∞–∂–µ –∏–≥—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–æ–ª—à–µ–±–Ω–æ–π!","–¢—ã —Å–µ–≥–æ–¥–Ω—è —Å–∏—è–µ—à—å —è—Ä—á–µ, —á–µ–º –≤—Å–µ –Ω–∞—à–∏ –ª–∞–º–ø–æ—á–∫–∏!","–¢—ã ‚Äî –Ω–∞—à–∞ –∫–æ—Ä–æ–ª–µ–≤–∞ –ø—Ä—ã–∂–∫–æ–≤!","–í–æ–∂–∞–∫ —Å—Ç–∞–∏ –≤–æ—Å—Ö–∏—â–∞–µ—Ç—Å—è —Ç–≤–æ–µ–π —Å–º–µ–ª–æ—Å—Ç—å—é!","–¢—ã –Ω–∞—Å—Ç–æ–ª—å–∫–æ –∫—Ä—É—Ç–∞—è, —á—Ç–æ –º–æ–Ω–µ—Ç–∫–∏ –±—Ä–æ—Å–∞—é—Ç—Å—è —Ç–µ–±–µ –≤ –Ω–æ–≥–∏!","–¢—ã —Å–æ–±–∏—Ä–∞–µ—à—å –º–æ–Ω–µ—Ç—ã –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –º—ã –∑–∞–≤–∞—Ä–∏–≤–∞–µ–º —á–∞–π!","–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –Ω–∞—Å –Ω–∞ –ø–æ–¥–≤–∏–≥–∏!","–¢—ã —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—à—å, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –¥–µ–Ω—å –ª—É—á—à–µ!","–¢–≤–æ–π —Å—Ç–∏–ª—å –∏–≥—Ä—ã ‚Äî –ø—Ä–æ—Å—Ç–æ –æ–≥–æ–Ω—å!","–í–æ–∂–∞–∫ —Å—Ç–∞–∏ –∑–æ–≤–µ—Ç —Ç–µ–±—è —Å–≤–æ–µ–π –ª—É—á—à–µ–π –æ—Ö–æ—Ç–Ω–∏—Ü–µ–π –∑–∞ –º–æ–Ω–µ—Ç–∫–∞–º–∏!","–¢—ã –¥–µ–ª–∞–µ—à—å –∏–≥—Ä—É –µ—â–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ!","–¢—ã –∫–∞–∫ —Å–æ–ª–Ω–µ—á–Ω—ã–π –ª—É—á–∏–∫ –≤ –Ω–∞—à–µ–º —Å–µ—Ä–æ–º –¥–Ω–µ!","–¢—ã —É–º–µ–µ—à—å –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –∏–≥—Ä—É –≤ –ø—Ä–∞–∑–¥–Ω–∏–∫!","–¢—ã –∑–∞—Å—Ç–∞–≤–ª—è–µ—à—å –Ω–∞—Å –≥–æ—Ä–¥–∏—Ç—å—Å—è –Ω–∞—à–µ–π —Å—Ç–∞–µ–π!","–í–∞—É! –ü–æ–∫–æ—Ä–∏–ª–∞ —Å–µ—Ä–¥—Ü–∞ –≤—Å–µ–π —Å—Ç–∞–∏ —Å–≤–æ–∏–º–∏ –ø—Ä—ã–∂–∫–∞–º–∏!","–ê—É—Ñ! –¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –∏–≥—Ä–∞–µ—à—å, —Ç—ã —Ç–≤–æ—Ä–∏—à—å –º–∞–≥–∏—é!","–í–æ–∂–∞–∫ —Å—Ç–∞–∏ –∑–∞—è–≤–ª—è–µ—Ç: —Ç—ã ‚Äî –ª—É—á—à–∏–π –∏–≥—Ä–æ–∫ –¥–Ω—è!","–¢—ã –ø—Ä–∏–Ω–æ—Å–∏—à—å —Ä–∞–¥–æ—Å—Ç—å –≤–µ–∑–¥–µ, –≥–¥–µ –ø–æ—è–≤–ª—è–µ—à—å—Å—è!","–¢—ã –æ–±–ª–∞–¥–∞–µ—à—å –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ–π –≥—Ä–∞—Ü–∏–µ–π –∏ –ª–µ–≥–∫–æ—Å—Ç—å—é!","–¢—ã –∑–∞—Ä—è–∂–∞–µ—à—å –Ω–∞—Å —ç–Ω–µ—Ä–≥–∏–µ–π —Å–≤–æ–∏–º –∞–∑–∞—Ä—Ç–æ–º!","–¢—ã —Å–ª–æ–≤–Ω–æ –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ –≤–µ—Å–Ω—ã –≤ —ç—Ç–æ–π –∏–≥—Ä–µ!","–í–æ–∂–∞–∫ —Å—Ç–∞–∏ –∫–ª—è–Ω–µ—Ç—Å—è: —Ç—ã ‚Äî —Å–∞–º–∞—è –æ—á–∞—Ä–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∏–≥—Ä–æ–∫ –¥–Ω—è!","–¢—ã –¥–µ–ª–∞–µ—à—å –º–∏—Ä –≤–æ–∫—Ä—É–≥ —Å–µ–±—è —è—Ä—á–µ!","–¢—ã ‚Äî –Ω–∞—à–µ —Å–æ–∫—Ä–æ–≤–∏—â–µ, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –Ω–∞—à–ª–∏ –≤ —ç—Ç–æ–π –∏–≥—Ä–µ!","–Ø –±—ã —Å —Ç–æ–±–æ–π –ø–æ–ø—Ä—ã–≥–∞–ª –∑–∞ –º–æ–Ω–µ—Ç–∫–∞–º–∏!","–í–µ—á–Ω–æ –±—ã —Å–º–æ—Ç—Ä–µ–ª –∫–∞–∫ —Ç—ã –ø—Ä—ã–≥–∞–µ—à—å! –£–º–Ω–∏—Ü–∞!","–¢—ã ‚Äî –≤–µ—Å–µ–Ω–Ω–∏–π –≤–µ—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ä–∞–¥–æ—Å—Ç—å –∏ —Ç–µ–ø–ª–æ!","–°–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π –¥–µ–Ω—å, –∏ –º—ã —Ä–∞–¥—É–µ–º—Å—è –≤–º–µ—Å—Ç–µ —Å —Ç–æ–±–æ–π!","–¢—ã —Ä–∞—Å—Ü–≤–µ—Ç–∞–µ—à—å —è—Ä—á–µ –ª—é–±—ã—Ö —Ü–≤–µ—Ç–æ–≤!","–í —ç—Ç–æ—Ç —á—É–¥–µ—Å–Ω—ã–π –¥–µ–Ω—å —Ç—ã —Å–∏—è–µ—à—å –æ—Å–æ–±–µ–Ω–Ω–æ —è—Ä–∫–æ!","–¢—ã ‚Äî —Å–∏–º–≤–æ–ª –≤–µ—Å–Ω—ã –∏ –∫—Ä–∞—Å–æ—Ç—ã!","–í–æ–∂–∞–∫ —Å—Ç–∞–∏ –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–±—è —Å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º –∏ –∂–µ–ª–∞–µ—Ç –º–æ—Ä–µ —Å—á–∞—Å—Ç—å—è!","–¢—ã ‚Äî –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤–µ—Å–µ–Ω–Ω–µ–µ —á—É–¥–æ!","–í —ç—Ç–æ—Ç –¥–µ–Ω—å —Ö–æ—á–µ—Ç—Å—è –ø–æ–∂–µ–ª–∞—Ç—å —Ç–µ–±–µ —Å—Ç–æ–ª—å–∫–æ –∂–µ —Ä–∞–¥–æ—Å—Ç–∏, —Å–∫–æ–ª—å–∫–æ –º–æ–Ω–µ—Ç–æ–∫ —Ç—ã —É–∂–µ —Å–æ–±—Ä–∞–ª–∞!","–¢—ã —É–∫—Ä–∞—à–∞–µ—à—å —ç—Ç–æ—Ç –¥–µ–Ω—å —Å–≤–æ–∏–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ–º!","–¢—ã ‚Äî –≤–µ—Å–Ω–∞ –≤ –Ω–∞—à–∏—Ö —Å–µ—Ä–¥—Ü–∞—Ö!","–í–æ–∂–∞–∫ —Å—Ç–∞–∏ —à–ª–µ—Ç —Ç–µ–±–µ –≤–µ—Å–µ–Ω–Ω–∏–µ –ø–æ—Ü–µ–ª—É–∏ –∏ –¥–æ–±—Ä—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è!"],r="–£—Ä–∞, —Ç—ã —Å–ø—Ä–∞–≤–∏–ª–∞—Å—å! –û—Ç –≤—Å–µ–π –¥—É—à–∏ –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å 8 –º–∞—Ä—Ç–∞ –∏ —Ö–æ—Ç–∏–º –ø—Ä–µ–∑–µ–Ω—Ç–æ–≤–∞—Ç—å —Ç–µ–±–µ –Ω–µ–±–æ–ª—å—à—É—é –ø—Ä–∏—è—Ç–Ω–æ—Å—Ç—å ‚ù§Ô∏è –ù–∞–ø–∏—à–∏ –≤–æ–∂–∞–∫—É —Å—Ç–∞–∏ —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–Ø –¥—É—Ä–µ—é —Å —ç—Ç–æ–π –ø—Ä–∏–∫–æ—Ä–º–∫–∏¬ª –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è üéÅ. –ß—Ç–æ –±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É, –Ω–∞–∂–º–∏ –Ω–∞ —ç–∫—Ä–∞–Ω!",n={savch:{text:r},tanya:{text:r},rusinya:{text:r},masha:{text:r},karina:{text:r},natasha:{text:r},shu:{text:r},katya:{text:r},vlada:{text:r},ksusha:{text:r},sashenka:{text:r},alexandra:{text:r},liza:{text:r}};var l=(t=>(t[t.Disabled=0]="Disabled",t[t.Platform=1]="Platform",t[t.Player=2]="Player",t[t.Coin=8]="Coin",t[t.Bat=16]="Bat",t[t.Flower=32]="Flower",t))(l||{});const o=[{name:"–°–∞–≤—á",greetings:n.savch.text,key:"savch"},{name:"–†—É—Å–∏–Ω—è",greetings:n.rusinya.text,key:"rusinya"},{name:"–ù–∞—Ç–∞—à–∞",greetings:n.natasha.text,key:"natasha"},{name:"–¢–∞–Ω—è",greetings:n.tanya.text,key:"tanya"},{name:"–ö–∞—Ä–∏–Ω–∞",greetings:n.karina.text,key:"karina"},{name:"–ú–∞—à–∞",greetings:n.masha.text,key:"masha"},{name:"–®—É",greetings:n.masha.text,key:"shu"},{name:"–ö–∞—Ç—è",greetings:n.katya.text,key:"katya"},{name:"–í–ª–∞–¥–∞",greetings:n.vlada.text,key:"vlada"},{name:"–ö—Å—é—à–∞",greetings:n.ksusha.text,key:"ksusha"},{name:"–°–∞—à–µ–Ω—å–∫–∞",greetings:n.sashenka.text,key:"sashenka"},{name:"–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞",greetings:n.alexandra.text,key:"alexandra"},{name:"–õ–∏–∑–∞",greetings:n.liza.text,key:"liza"}];class h extends a.Scene{constructor(){super("Menu"),e(this,"window"),e(this,"text"),e(this,"state","none"),e(this,"shaders",[]),e(this,"startGame",(()=>{this.scene.start("Game")}))}preload(){this.load.glsl("cardShader","assets/shaders/cardShader.frag"),this.load.glsl("backgroundShader","assets/shaders/background.glsl")}create(){this.add.shader("backgroundShader",this.cameras.main.width/2,this.cameras.main.height/2,this.cameras.main.width,this.cameras.main.height,{time:0});const t=this.cameras.main.width/2;this.cards=[],this.shuffleArray([...o]).forEach(((e,s)=>{const i=s%2,r=Math.floor(s/2),n=0===i?t-82.5:t+82.5,l=60+90*r,o=n+(0===i?-500:500),h=l+a.Math.Between(-200,200),p=this.add.rectangle(o,h,150,75,16777215,1);p.setAlpha(0),p.setScale(.5),p.angle=a.Math.Between(-105,15),this.tweens.add({targets:p,x:n,y:l,alpha:1,scale:1,angle:0,ease:"Sine.easeOut",duration:800,delay:150*s,onStart:()=>{p.setInteractive(),p.on("pointerdown",(()=>{localStorage.setItem("girlKey",e.key),localStorage.setItem("greetings",e.greetings),this.cameras.main.fadeOut(1e3),this.time.delayedCall(1e3,(()=>{this.startGame()}))}));const t=this.add.text(n,l,`${e.name}`,{color:"#ea4386",fontSize:"18px"}).setOrigin(.5).setAlpha(0);this.tweens.add({targets:t,alpha:1,duration:400,ease:"Quad.easeOut",delay:1e3})}}),this.time.delayedCall(150*s+1400,(()=>{const t=this.add.particles(0,0,"flare",{speed:24,lifespan:1500,quantity:5,scale:{start:.4,end:0},emitting:!1,emitZone:{type:"edge",source:p.getBounds(),quantity:42},duration:200});p.on("pointerover",(()=>t.start()))})),this.cards.push(p)}))}shuffleArray(t){for(let e=t.length-1;e>0;e--){const a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t}}class p extends a.Physics.Matter.Sprite{constructor(t,a,s,i,r,n){var o;super(t.matter.world,a,s,i,n,{label:"girl",frictionAir:.006}),e(this,"direction",3),e(this,"hp",100),e(this,"isTouchingGround",!1),e(this,"text"),e(this,"girlSpriteKey",""),this.setData("label","girl"),this.flipX=!0,this.name=r,this.text=this.scene.add.text(this.x,this.y-20,this.name,{color:"#3807c4",fontFamily:"Arial",fontStyle:"bold",fontSize:22,align:"center"}).setOrigin(.5,.5),this.text.setDepth(11).setAlpha(0),this.text.postFX.addGlow(16777215,6,0,!1,.1,24),this.setRectangle(27,45),this.setOrigin(.5,.55),this.girlSpriteKey=localStorage.getItem("girlKey"),this.setScale(2),this.setFixedRotation(),this.setDepth(20),this.label="girl",this.scene.add.existing(this),(o=this.scene.anims).create({key:"alexandra_jump",frames:o.generateFrameNames("alexandra_jump",{start:0,end:3,prefix:"alexandra_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"alexandra_fall",frames:o.generateFrameNames("alexandra_fall",{start:0,end:3,prefix:"alexandra_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"karina_jump",frames:o.generateFrameNames("karina_jump",{start:0,end:3,prefix:"karina_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"karina_fall",frames:o.generateFrameNames("karina_fall",{start:0,end:3,prefix:"karina_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"katya_jump",frames:o.generateFrameNames("katya_jump",{start:0,end:3,prefix:"katya_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"katya_fall",frames:o.generateFrameNames("katya_fall",{start:0,end:3,prefix:"katya_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"ksusha_jump",frames:o.generateFrameNames("ksusha_jump",{start:0,end:3,prefix:"ksusha_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"ksusha_fall",frames:o.generateFrameNames("ksusha_fall",{start:0,end:3,prefix:"ksusha_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"liza_fall",frames:o.generateFrameNames("liza_fall",{start:0,end:3,prefix:"liza_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"liza_jump",frames:o.generateFrameNames("liza_jump",{start:0,end:3,prefix:"liza_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"masha_fall",frames:o.generateFrameNames("masha_fall",{start:0,end:3,prefix:"masha_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"masha_jump",frames:o.generateFrameNames("masha_jump",{start:0,end:3,prefix:"masha_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"natasha_fall",frames:o.generateFrameNames("natasha_fall",{start:0,end:3,prefix:"natasha_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"natasha_jump",frames:o.generateFrameNames("natasha_jump",{start:0,end:3,prefix:"natasha_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"rusinya_fall",frames:o.generateFrameNames("rusinya_fall",{start:0,end:3,prefix:"rusinya_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"rusinya_jump",frames:o.generateFrameNames("rusinya_jump",{start:0,end:3,prefix:"rusinya_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"sashenka_fall",frames:o.generateFrameNames("sashenka_fall",{start:0,end:3,prefix:"sashenka_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"sashenka_jump",frames:o.generateFrameNames("sashenka_jump",{start:0,end:3,prefix:"sashenka_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"savch_fall",frames:o.generateFrameNames("savch_fall",{start:0,end:3,prefix:"savch_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"savch_jump",frames:o.generateFrameNames("savch_jump",{start:0,end:3,prefix:"savch_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"shu_fall",frames:o.generateFrameNames("shu_fall",{start:0,end:3,prefix:"shu_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"shu_jump",frames:o.generateFrameNames("shu_jump",{start:0,end:3,prefix:"shu_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"tanya_fall",frames:o.generateFrameNames("tanya_fall",{start:0,end:3,prefix:"tanya_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"tanya_jump",frames:o.generateFrameNames("tanya_jump",{start:0,end:3,prefix:"tanya_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"vlada_fall",frames:o.generateFrameNames("vlada_fall",{start:0,end:3,prefix:"vlada_fall",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"vlada_jump",frames:o.generateFrameNames("vlada_jump",{start:0,end:3,prefix:"vlada_jump",suffix:".png"}),repeat:-1,frameRate:20}),o.create({key:"petal",frames:o.generateFrameNames("petal",{start:0,end:3,prefix:"petal",suffix:".png"}),repeat:-1,frameRate:10}),this.emitter=this.scene.add.particles(0,0,"flare",{speed:24,lifespan:1500,quantity:10,scale:{start:.4,end:0},emitting:!1,emitZone:{type:"edge",source:this.getBounds(),quantity:42},duration:500}),this.emitter.setDepth(7),this.setOnCollide((t=>{this.isTouchingGround=!0,this.emitter.setPosition(this.x,this.y+this.height/2),this.emitter.start()})),this.setCollisionCategory(l.Player),this.setCollidesWith([l.Disabled,l.Coin,l.Bat,l.Flower]),this.setName("girl")}update(t){const{left:e,right:a,up:s,down:i,space:r}=t;this.emitter.copyPosition(this.x,this.y),this.body.velocity.y<0?(this.anims.play(`${this.girlSpriteKey}_jump`,!0),a.isDown?(this.setVelocityX(4),this.flipX=!0):e.isDown&&(this.setVelocityX(-4),this.flipX=!1)):this.body.velocity.y>0?(this.anims.play(`${this.girlSpriteKey}_fall`,!0),a.isDown?(this.setVelocityX(4),this.flipX=!0):e.isDown&&(this.setVelocityX(-4),this.flipX=!1)):e.isDown?(this.setVelocityX(-4),this.flipX=!1,this.anims.play(`${this.girlSpriteKey}_run`,!0)):a.isDown&&(this.setVelocityX(4),this.flipX=!0,this.anims.play(`${this.girlSpriteKey}_run`,!0)),this.text.copyPosition({x:this.x,y:this.y-60}),this.y>3e3&&(this.setPosition(x.x,this.scene.firstPlatformY-200),this.setVelocityY(-10))}}class d extends a.Physics.Matter.Image{constructor(t,a,s,i,r){super(t.matter.world,a,s,i,r),e(this,"startY",0),e(this,"startX",0),e(this,"verticalTween",null),e(this,"horizontalTween",null),this.startX=a,this.startY=s,this.setStatic(!0),this.setDepth(7),this.setFixedRotation(),this.setFriction(1,0,1/0),this.setIgnoreGravity(!0),this.setData("label","platform"),this.setCollisionCategory(l.Platform),this.setCollidesWith(l.Player),this.scene.add.existing(this)}moveVertically(t){this.scene.tweens.addCounter({from:0,to:-900,duration:t,ease:a.Math.Easing.Sine.InOut,repeat:-1,yoyo:!0,onUpdate:(t,e)=>{const a=this.startY+e.value,s=a-this.y;this.y=a,this.setVelocityY(s)}})}moveHorizontally(t,e){this.horizontalTween=this.scene.tweens.addCounter({from:0,to:e-this.startX,duration:t,ease:a.Math.Easing.Sine.InOut,repeat:-1,yoyo:!0,onUpdate:(t,{value:e})=>{if(!this.scene||!this.body)return;const a=this.startX+e;this.setPosition(a,this.y)},onComplete:()=>{this.horizontalTween=null}})}destroy(){this.verticalTween&&(this.verticalTween.stop(),this.verticalTween=null),this.horizontalTween&&(this.horizontalTween.stop(),this.horizontalTween=null),super.destroy()}}class c extends a.GameObjects.Container{constructor(t,s,i,r,n,l){super(t,s,i),e(this,"rectangle"),e(this,"text"),e(this,"button"),e(this,"paper"),this.scene=t,t.cameras.main.width,t.cameras.main.height,this.paper=new a.GameObjects.Image(t,0,0,"paper"),this.add(this.paper),this.setSize(r,n),this.text=new a.GameObjects.Text(t,this.x,this.y,l,{color:"#000000",wordWrap:{width:r+32},fontSize:24}),this.add(this.text),this.text.setPosition(this.width/2-r-10,this.height/2-this.height+36),this.setDepth(100),this.setScrollFactor(0),this.alpha=0,t.add.existing(this)}hideTextBox(){this.destroy()}}class m extends a.Physics.Matter.Sprite{constructor(t,e,a){super(t.matter.world,e,a,"bat","bat0.png"),this.setScale(1),this.setDepth(50),this.setIgnoreGravity(!0),this.setCollisionCategory(l.Bat),this.setCollidesWith([l.Player]),this.setFixedRotation(),t.add.existing(this),t.anims.create({key:"bat",frames:[{key:"bat",frame:"bat0.png"},{key:"bat",frame:"bat1.png"},{key:"bat",frame:"bat2.png"},{key:"bat",frame:"bat3.png"}],frameRate:8,repeat:-1}),this.play("bat")}startFlight(t,e){this.flipX=!(t>0),this.setVelocityX(t*e)}}class f extends Phaser.Physics.Matter.Sprite{constructor(t){const a=t.cameras.main,s=a.scrollX+Phaser.Math.Between(-50,50),i=a.scrollY-a.height-Phaser.Math.Between(-400,-500);super(t.matter.world,s,i,"petal"),e(this,"lifeTimer"),e(this,"rotationTween"),this.setBody({type:"rectangle",width:10,height:10},{isSensor:!0,label:"petal"}),this.setScale(2),this.setIgnoreGravity(!0).setDepth(1e3).setRotation(Phaser.Math.DegToRad(Phaser.Math.Between(0,360))).setAlpha(.8).setTint(13667515),this.anims.play("petal"),t.add.existing(this),this.startMovement(),this.lifeTimer=this.scene.time.delayedCall(5e3,(()=>this.destroyPetal()))}startMovement(){const t=Phaser.Math.Between(-3,3),e=Phaser.Math.Between(2,5);this.setVelocity(t,e),this.rotationTween=this.scene.tweens.add({targets:this,angle:this.angle+360*(Phaser.Math.Between(0,1)?1:-1),duration:Phaser.Math.Between(3e3,5e3),repeat:-1})}destroy(t){this.rotationTween&&(this.rotationTween.stop(),this.rotationTween.remove()),this.lifeTimer&&this.lifeTimer.destroy(),super.destroy(t)}destroyPetal(){this.rotationTween&&(this.rotationTween.stop(),this.rotationTween.remove()),this.scene.tweens.add({targets:this,alpha:0,scaleX:0,scaleY:0,duration:500,onComplete:()=>{this.setVisible(!1).setActive(!1).body.enable=!1,this.destroy(!0)}})}}class y{constructor(t){e(this,"scene"),this.scene=t,this.scene.time.addEvent({delay:200,callback:()=>new f(this.scene),loop:!0})}}class g extends a.Scene{constructor(){super({key:"Guide"}),e(this,"startButton"),e(this,"buttonText")}create(){const{width:t,height:e}=this.cameras.main,a=t/2,s=this.add.text(a,20,"–ü—Ä–∏–≤–µ—Ç, –ø–æ—Å–ª–∞–Ω–Ω–∏—Ü–∞ –≤–µ—Å–Ω—ã!\n\n–≠—Ç–∞ –∏–≥—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Å–∞–º—ã—Ö –ø—Ä–µ–ª–µ—Å—Ç–Ω—ã—Ö –ª–µ–¥–∏ –Ω–∞ —Å–≤–µ—Ç–µ. –ü—Ä–∞–≤–∏–ª–∞ –µ—ë –ø—Ä–µ–¥–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã:\n–≤—ã–±–∏—Ä–∞–π –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –ø—Ä—ã–≥–∞–π-–∫—Ä—É—Ç–∏—Å—å –≤–ª–µ–≤–æ –∏ –≤–ø—Ä–∞–≤–æ\n–≥Ã∂–ªÃ∂–∞Ã∂–≤Ã∂–ΩÃ∂–æÃ∂–µÃ∂ Ã∂–≤Ã∂ Ã∂—ÅÃ∂—ÇÃ∂–µÃ∂–∫Ã∂–ªÃ∂–æÃ∂ Ã∂–ΩÃ∂–µÃ∂ Ã∂–øÃ∂–æÃ∂–øÃ∂–∞Ã∂–¥Ã∂–∏Ã∂, —Å–æ–±–∏—Ä–∞–π –º–æ–Ω–µ—Ç–∫–∏ –∏ —Ü–≤–µ—Ç—ã,\n–æ—Å—Ç–µ—Ä–µ–≥–∞–π—Å—è –∂—É—Ç–∫–∏—Ö –ª–µ—Ç—É—á–∏—Ö –º—ã—à–µ–π.\n\n–°–æ–±–µ—Ä–∏ –º–∏–Ω–∏–º—É–º 50 –º–æ–Ω–µ—Ç, —á—Ç–æ–±—ã –ø—Ä–∏–±–ª–∏–∑–∏—Ç—å –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Ç–µ–ø–ª–∞!\n–ê –¥–∞–ª—å—à–µ –≤—Å—ë –ø–æ–π–º–µ—à—å ;)\n\n–£—Å–ø–µ—Ö–æ–≤, –ø—Ä–∏–Ω—Ü–µ—Å—Å–∞!\n\n–° –ª—é–±–æ–≤—å—é –∏ –æ–±–æ–∂–∞–Ω–∏–µ–º, –¢–≤–æ–π –í–æ–∂–∞–∫üå∑üê∫",{font:"18px Arial",color:"#8b4513",align:"left",wordWrap:{width:t-40}}).setOrigin(.5,0).setDepth(10),i=s.y+s.height-40,r=.4*e;this.add.text(a/2,i+r/2,"–ñ–º–∏ –Ω–∞ –ª–µ–≤—É—é —Å—Ç–æ—Ä–æ–Ω—É —ç–∫—Ä–∞–Ω–∞\n—á—Ç–æ –±—ã –ª–µ—Ç–µ—Ç—å –≤–ª–µ–≤–æ ‚óÄ",{font:"20px Arial",color:"#2f4f4f",align:"center",wordWrap:{width:a-40}}).setOrigin(.5).setDepth(10),this.add.text(1.5*a,i+r/2,"–ñ–º–∏ –Ω–∞ –ø—Ä–∞–≤—É—é —Å—Ç–æ—Ä–æ–Ω—É —ç–∫—Ä–∞–Ω–∞\n—á—Ç–æ –±—ã –ª–µ—Ç–µ—Ç—å –≤–ø—Ä–∞–≤–æ ‚ñ∂",{font:"20px Arial",color:"#2f4f4f",align:"center",wordWrap:{width:a-40}}).setOrigin(.5).setDepth(10),this.tweens.add({targets:[s],alpha:{from:0,to:1},y:{from:-e,to:s.y,value:s.y},duration:800,ease:"Power2"}),this.add.rectangle(0,0,t,e,16770273).setOrigin(0),this.createStartButton(t,e),this.tweens.add({targets:[this.startButton,this.buttonText],y:e-150,duration:800,ease:"Back.out"})}createStartButton(t,e){this.startButton=this.add.rectangle(t/2,e+100,300,60,16738740).setDepth(1).setInteractive().setOrigin(.5).on("pointerdown",(()=>this.startGame())),this.buttonText=this.add.text(t/2,e+100,"–ù–∞—á–∞—Ç—å –≤–æ–ª—à–µ–±—Å—Ç–≤–æ ‚ú®",{font:"24px Arial",color:"#ffffff",align:"center",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setDepth(2),this.add.rectangle(t/2,e+100+5,300,60,0,.2).setOrigin(.5)}startGame(){this.tweens.add({targets:[this.startButton,this.buttonText],alpha:0,duration:500,ease:"Power2"}),this.cameras.main.fadeOut(1e3),this.time.delayedCall(1100,(()=>{this.scene.start("Menu"),this.scene.stop()}))}}const u=a.Math.DegToRad(-180),x={x:550,y:2200};class _ extends a.Scene{constructor(){super("Game"),e(this,"playerController",{blocked:{left:!1,right:!1,bottom:!1},numTouching:{left:0,right:0,bottom:0},sensors:{bottom:null,left:null,right:null}}),e(this,"hook"),e(this,"lineGroup"),e(this,"cursors"),e(this,"stars"),e(this,"platform"),e(this,"platform2"),e(this,"platform3"),e(this,"petalGenerator"),e(this,"isGuideActive",!0),e(this,"isMovingLeft",!1),e(this,"isMovingRight",!1),e(this,"moveSpeed",5),e(this,"halfWidth",0),e(this,"bats"),e(this,"platforms"),e(this,"coins"),e(this,"coinCount",0),e(this,"coinText"),e(this,"maxPlatforms",10),e(this,"platformDistance",300),e(this,"lastPlatformY",0),e(this,"firstPlatformY",0),e(this,"flowers"),e(this,"chest"),e(this,"starsSummary",0),e(this,"lizard"),e(this,"isTouchingGround",!1),e(this,"level",1),e(this,"coinsChanged"),e(this,"loadNextLevel",!1),e(this,"showDialog",!1),e(this,"dialog"),e(this,"fish"),e(this,"dialogLevel",0),e(this,"emitter",new a.Events.EventEmitter),e(this,"water"),e(this,"stick"),e(this,"music"),e(this,"backgrounds",[]),e(this,"velocityX",10),e(this,"collisionCategory1",1),e(this,"collisionCategory2",2),e(this,"collisionCategory3",4),e(this,"collisionCategory4",8),e(this,"collisionWaterCategory",5),e(this,"textBox")}preload(){this.cursors=this.input.keyboard.createCursorKeys()}create2(){const t=a.Physics.Matter.Matter,e=this.lizard.width,s=this.lizard.height;this.lizard.x,this.lizard.y,this.playerController.sensors.bottom=t.Bodies.rectangle(0,s/2,.75*e,5,{isSensor:!0,label:"bottomSensor"}),this.playerController.sensors.left=t.Bodies.rectangle(.45*-e,0,5,.25*s,{isSensor:!0,label:"leftSensor"}),this.playerController.sensors.right=t.Bodies.rectangle(.45*e,0,5,.25*s,{isSensor:!0,label:"rightSensor"}),t.Body.create({parts:[this.lizard.body,this.playerController.sensors.bottom,this.playerController.sensors.left,this.playerController.sensors.right],friction:.01,restitution:.05}),this.matter.world.on("beforeupdate",(()=>{this.playerController.numTouching.left=0,this.playerController.numTouching.right=0,this.playerController.numTouching.bottom=0})),this.matter.world.on("collisionactive",(t=>{const e=this.lizard.body,a=this.playerController.sensors.left,s=this.playerController.sensors.right,i=this.playerController.sensors.bottom;for(let r=0;r<t.pairs.length;r++){const n=t.pairs[r].bodyA,l=t.pairs[r].bodyB;n!==e&&l!==e&&(n===i||l===i?this.playerController.numTouching.bottom+=1:n===a&&l.isStatic||l===a&&n.isStatic?this.playerController.numTouching.left+=1:(n===s&&l.isStatic||l===s&&n.isStatic)&&(this.playerController.numTouching.right+=1))}})),this.matter.world.on("afterupdate",(()=>{this.playerController.blocked.right=this.playerController.numTouching.right>0,this.playerController.blocked.left=this.playerController.numTouching.left>0,this.playerController.blocked.bottom=this.playerController.numTouching.bottom>0}))}handleTouchInput(t){t.x<this.halfWidth?(this.isMovingLeft=!0,this.isMovingRight=!1):(this.isMovingLeft=!1,this.isMovingRight=!0)}create(){var t;this.coins=this.add.group(),(t=this.anims).create({key:"coin",frames:t.generateFrameNames("coin",{start:0,end:4,prefix:"MonedaD",suffix:".png"}),repeat:-1,frameRate:10}),this.originalWidth=this.scale.width,this.originalHeight=this.scale.height,this.platforms=this.add.group(),this.coinsChanged=this.add.group(),this.flowers=this.add.group(),this.petalGenerator=new y(this),this.bats=this.add.group(),this.time.addEvent({delay:a.Math.Between(7e3,1e4),callback:()=>{const t=a.Math.Between(0,1),e=0===t?-200:this.cameras.main.width+200,s=0===t?1:-1,i=new m(this,e,a.Math.Between(this.lizard.y-1e3,this.lizard.y-1e3));i.setData("label","bat"),this.bats.add(i),i.startFlight(s,10),this.time.delayedCall(1e4,(()=>{i.destroy(!0)}))},callbackScope:this,loop:!0}),this.halfWidth=this.scale.width/2,this.input.addPointer(1),this.input.on("pointerdown",(t=>{this.handleTouchInput(t)})),this.input.on("pointermove",(t=>{t.isDown&&this.handleTouchInput(t)})),this.input.on("pointerup",(()=>{this.isMovingLeft=!1,this.isMovingRight=!1})),this.coinText=this.add.text(20,20,"–ú–æ–Ω–µ—Ç—ã: 0",{fontSize:"24px",fill:"#FFD700",fontFamily:"Arial",stroke:"#000",strokeThickness:4}).setScrollFactor(0).setDepth(1e3),this.add.existing(this.coinText),this.sound.pauseOnBlur=!1,this.music=this.sound.add("music",{volume:.2,loop:!0}),this.sound.locked?this.sound.once(a.Sound.Events.UNLOCKED,(()=>{this.music.play()})):this.music.play(),this.game.events.on(a.Core.Events.BLUR,(()=>{})),document.addEventListener("visibilitychange",(()=>{console.log("visibilitychange"),document.hidden})),this.tweener={x:u},this.GROUND_COLLISION_GROUP=this.matter.world.nextCategory();const e=localStorage.getItem("happyName");let s;var i;(i=s||(s={})).Ksenia="ksenia",i.Elena="elena";const r=localStorage.getItem("girlKey");this.lizard=new p(this,x.x,x.y+1e3,r,e,{label:"girl"}),this.create2(),this.textBox=new c(this,this.cameras.main.centerX,this.cameras.main.centerY,300,420,n[r].text).setDepth(1e3).setInteractive(),this.textBox.on("pointerdown",(()=>{console.log("pointerdown"),this.textBox.hideTextBox(),this.scene.resume()})),this.createPlatform(x.x,x.y+600),this.createPlatform(x.x,x.y+300),this.createPlatform(x.x,x.y),this.matter.world.on("collisionstart",(t=>{this.handleCollision(t),this.handleCoinCollision(t)}),this);const o=(t,e)=>{const a=this.matter.add.sprite(t,e,"tulip",void 0,{label:"tulip"});a.setScale(1),a.setIgnoreGravity(!0),a.setBounce(.5),a.setDepth(100),a.setData("label","tulip"),a.setCollisionCategory(l.Flower),a.setCollidesWith([l.Player]),this.flowers.add(a)};this.time.addEvent({delay:500,callback:this.generatePlatforms,callbackScope:this,loop:!0}),this.time.addEvent({delay:1e3,callback:()=>this.createCoin(a.Math.Between(x.x-150,x.x+150),this.lastPlatformY-60),callbackScope:this,loop:!0}),this.time.addEvent({delay:4e3,callback:()=>o(a.Math.Between(x.x-150,x.x+150),this.lastPlatformY-40),callbackScope:this,loop:!0}),this.cameras.main.startFollow(this.lizard);const{width:h,height:d}=this.scale,f=this.add.graphics();f.fillStyle(0,1),this.backgrounds.push({ratioX:.02,ratioY:.004,sprite:this.add.tileSprite(0,700,3*h,3*d,"Back_2").setOrigin(.5).setScrollFactor(0,0).setDepth(0)},{ratioX:.02,ratioY:.025,sprite:this.add.tileSprite(0,700,3*h,3*d,"Clouds_front").setScrollFactor(0,0).setScale(1.1,1.1).setDepth(1)},{ratioX:.08,ratioY:.015,sprite:this.add.tileSprite(-20,700,3*h,3*d,"Rock_2").setOrigin(.5).setScrollFactor(0,0).setDepth(2)},{ratioX:.05,ratioY:.008,sprite:this.add.tileSprite(0,900,3*h,3*d,"Clouds_back").setOrigin(.5).setScrollFactor(0,0).setDepth(3)},{ratioX:.12,ratioY:.02,sprite:this.add.tileSprite(0,700,3*h,3*d,"Rock_1").setOrigin(.5).setScrollFactor(0,0).setDepth(4)},{ratioX:.2,ratioY:.03,sprite:this.add.tileSprite(0,830,3*h,3*d,"Back_1").setOrigin(.5).setScrollFactor(0,0).setScale(1.1,1.1).setDepth(5)}),this.backgrounds.forEach((t=>{f.fillRect(0,0,this.cameras.main.width,this.cameras.main.height)})),this.add.graphics(),this.matter.world.on("collisionend",((t,e,a)=>{t.pairs.some((t=>"water"==t.bodyA.label&&"hook"==t.bodyB.label))})),this.lights.enable(),this.lights.setAmbientColor(8421504),this.light=this.lights.addLight(this.lizard.x,this.lizard.y,512).setIntensity(2),this.matter.world.update60Hz()}update(t,e){for(let a=0;a<this.backgrounds.length;++a){const t=this.backgrounds[a];t.sprite&&(t.sprite.tilePositionX=this.cameras.main.scrollX*t.ratioX)}this.light.x=this.lizard.x,this.light.y=this.lizard.y,this.cleanPlatforms(),this.cleanCoins(),this.updatePlatformCollisions(),this.cursors,this.lizard.update(this.cursors),this.isMovingLeft?(this.lizard.flipX=!1,this.lizard.setVelocityX(-this.moveSpeed)):this.isMovingRight?(this.lizard.flipX=!0,this.lizard.setVelocityX(this.moveSpeed)):this.lizard.setVelocityX(.9*this.lizard.body.velocity.x),this.coinCount>=1&&(this.textBox.alpha=1),this.bats.getChildren().forEach((t=>{this.cameras.main.scrollY+1e3<t.y&&(t.destroy(),console.log("bat.destroy();"))}))}increaseLevel(){this.level+=1,console.log("level: ",this.level)}createPlatform(t,e){var a,s;const i=new d(this,t,e,"platform2",{});this.platforms.add(i),this.lastPlatformY=e,this.firstPlatformY=null==(s=null==(a=this.platforms.getChildren())?void 0:a.at)?void 0:s.call(a,0).y}generatePlatforms(){const t=a.Math.Between(x.x-150,x.x+150),e=this.lastPlatformY-a.Math.Between(320,360);this.createPlatform(t,e),this.lastPlatformY=e}updatePlatformCollisions(){const t=this.lizard.body.velocity.y<0;this.lizard.body.velocity.x,this.lizard.body.velocity.x,t?this.lizard.setCollidesWith([l.Disabled,l.Coin,l.Bat,l.Flower]):this.lizard.setCollidesWith([l.Platform,l.Coin,l.Bat,l.Flower])}createCoin(t,e){const a=this.matter.add.sprite(t,e,"coin",void 0,{label:"coin"});a.setScale(2),a.setIgnoreGravity(!0),a.setBounce(.5),a.setDepth(100),a.setData("label","coin"),a.anims.play("coin"),a.setCollisionCategory(l.Coin),a.setCollidesWith([l.Player]),this.coins.add(a)}handleCollision(t){t.pairs.forEach((t=>{const e=t.bodyA,a=t.bodyB,s=e.gameObject,i=a.gameObject,r=s&&"girl"===s.getData("label"),n=s&&"platform"===s.getData("label"),l=i&&"girl"===i.getData("label"),o=i&&"platform"===i.getData("label");if((r&&o||l&&n)&&this.lizard.body.velocity.y>0){const t=this.level>2?.7*this.level:0;this.lizard.setVelocityY(-17-t)}const h=s&&"bat"===s.getData("label"),p=i&&"bat"===i.getData("label");(r&&p||l&&h)&&(this.coinCount-=2,this.coinText.setText(`–ú–æ–Ω–µ—Ç—ã: ${this.coinCount}`),this.cameras.main.shake(200,.05),h&&s.destroy(!0),p&&i.destroy(!0))}))}cleanPlatforms(){this.platforms.getChildren().forEach((t=>{t.y>this.cameras.main.scrollY+1100&&t.destroy(!0)}))}cleanCoins(){this.coins.getChildren().forEach((t=>{t.y>this.cameras.main.scrollY+1100&&t.destroy()}))}createFloatingText(t,e,a){const s=this.add.text(t,e,a,{fontSize:"36px",color:"#4a154b",fontStyle:"bold",wordWrap:{width:350},stroke:"#ffffff",strokeThickness:6,shadow:{offsetX:2,offsetY:2,color:"#000000",blur:3,stroke:!0}});s.setDepth(800),s.setScrollFactor(0),this.coinsChanged.add(s),this.tweens.add({targets:s,y:e-150,alpha:0,duration:7e3,ease:"Cubic.easeOut",onComplete:()=>s.destroy()})}handleCoinCollision(t){t.pairs.forEach((t=>{const e=t.bodyA,s=t.bodyB,r=e.gameObject,n=s.gameObject;r&&r.getData("label"),r&&r.getData("label"),n&&n.getData("label"),n&&n.getData("label");const l=[e,s].find((t=>{var e;return"coin"===(null==(e=null==t?void 0:t.gameObject)?void 0:e.getData("label"))})),o=[e,s].find((t=>{var e;return"girl"===(null==(e=null==t?void 0:t.gameObject)?void 0:e.getData("label"))}));if(l&&o){const t=l.gameObject;this.coinCount++,this.coinText.setText(`–ú–æ–Ω–µ—Ç—ã: ${this.coinCount}`),10===this.coinCount&&this.increaseLevel(),20===this.coinCount&&this.increaseLevel(),30===this.coinCount&&this.increaseLevel(),t.destroy(!0),this.sound.play("grab-coin",{volume:.3,detune:a.Math.Between(0,1200)})}const h=[e,s].find((t=>{var e;return"tulip"===(null==(e=null==t?void 0:t.gameObject)?void 0:e.getData("label"))}));if(h&&o){const t=h.gameObject;this.coinCount+=20,this.coinText.setText(`–ú–æ–Ω–µ—Ç—ã: ${this.coinCount}`),this.createFloatingText(this.cameras.main.centerX-150,this.cameras.main.centerY-250,i[a.Math.Between(0,i.length-1)]),t.destroy(!0),this.sound.play("grab-coin",{volume:.3,detune:a.Math.Between(0,1200)})}}))}}const w={type:a.WEBGL,canvas:document.querySelector("#phaser"),fps:{limit:140},scale:{mode:a.Scale.RESIZE,autoCenter:a.Scale.CENTER_BOTH},physics:{default:"matter",matter:{gravity:{y:1}}},scene:[s,g,h,_]};new a.Game(w);
